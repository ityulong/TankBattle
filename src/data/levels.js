import { TILE_TYPES, GRID_SIZE } from '../core/config.js';
const CHAR_TO_TILE = {
  '.': TILE_TYPES.EMPTY,
  '#': TILE_TYPES.BRICK,
  '@': TILE_TYPES.STEEL,
  '~': TILE_TYPES.WATER,
  '%': TILE_TYPES.GRASS,
  '-': TILE_TYPES.ICE,
};

const RAW_LEVELS = [
  [
      "..........................",
      "..........................",
      "..##..##..##..##..##..##..",
      "..##..##..##..##..##..##..",
      "..##..##..##..##..##..##..",
      "..##..##..##..##..##..##..",
      "..##..##..##@@##..##..##..",
      "..##..##..##@@##..##..##..",
      "..##..##..##..##..##..##..",
      "..##..##..........##..##..",
      "..##..##..........##..##..",
      "..........##..##..........",
      "..........##..##..........",
      "##..####..........####..##",
      "@@..####..........####..@@",
      "..........##..##..........",
      "..........######..........",
      "..##..##..######..##..##..",
      "..##..##..##..##..##..##..",
      "..##..##..##..##..##..##..",
      "..##..##..##..##..##..##..",
      "..##..##..........##..##..",
      "..##..##..........##..##..",
      "..##..##...####...##..##..",
      "...........#..#...........",
      "...........#..#..........."
  ],
  [
      "......@@......@@..........",
      "......@@......@@..........",
      "..##..@@......##..##..##..",
      "..##..@@......##..##..##..",
      "..##..........##..##@@##..",
      "..##........####..##@@##..",
      "......##..........@@......",
      "......##..........@@......",
      "%%....##....@@....##%%##@@",
      "%%....##....@@....##%%##@@",
      "%%%%......##....@@..%%....",
      "%%%%......##....@@..%%....",
      "..######%%%%%%@@....%%##..",
      "..######%%%%%%@@....%%##..",
      "......@@%%##..##..##..##..",
      "......@@%%##..##..##..##..",
      "@@##..@@..##..##......##..",
      "@@##..@@..##..##......##..",
      "..##..##..######..##..##..",
      "..##..##..######..##..##..",
      "..##..##..######..........",
      "..##..##..................",
      "..##..............##..##..",
      "..##.......####...##..##..",
      "..##..##...#..#...######..",
      "..##..##...#..#...######.."
  ],
  [
      "........##......##........",
      "........##......##........",
      "..%%%%%%##................",
      "..%%%%%%##..........@@@@@@",
      "##%%%%%%..................",
      "##%%%%%%..................",
      "%%%%%%%%......##..#######.",
      "%%%%%%%%......##..#######.",
      "%%%%%%%%########..##...#..",
      "%%%%%%%%######....##...#..",
      "%%%%%%%%....##.........#..",
      "%%%%%%%%....##.........#..",
      "..%%........@@@@@@....%%..",
      "..%%........@@@@@@....%%..",
      "..................%%%%%%%%",
      "..##..##..........%%%%%%%%",
      "###..####..#######%%%%%%%%",
      "###..####..#......%%%%%%%%",
      "..........##......%%%%%%%%",
      "..........##..####%%%%%%%%",
      "##....@...........%%%%%%..",
      "##....@...........%%%%%%..",
      "####..@...........%%%%%%..",
      "####..@....####...%%%%%%..",
      "@@####.....#..#...##......",
      "@@####.....#..#...##......"
  ],
  [
      "..%%%%................%%..",
      "..%%%%................%%..",
      "%%%%......####..........%%",
      "%%%%....##########......%%",
      "%%.....#############....@@",
      "%%.....###############....",
      "@@....#################...",
      "......#################...",
      ".....###......######..#...",
      ".....#..........####..#...",
      "~~...#..@...@...###.......",
      "~~...#..@...@...###.......",
      "....##..........###...~~~~",
      "....##..####....###...~~~~",
      "....################......",
      "....################......",
      "...##################.....",
      "...##################.....",
      "..####################....",
      "......############........",
      "..####..########..####..%%",
      "..######..####..######..%%",
      "%%..####........####..%%%%",
      "%%.........####.......%%%%",
      "@@%%.......#..#.....%%%%@@",
      "@@%%.......#..#.....%%%%@@"
  ],
  [
      "........####..............",
      "........####..............",
      "........##......@@@@@@....",
      "@@..##..##..........@@....",
      "@@..##......##............",
      "@@..##......##............",
      "##..######..####..~~~~..~~",
      "##..######..####..~~~~..~~",
      "##......##........~~......",
      "..................~~......",
      "........~~~~..~~~~~~..####",
      "....##..~~~~..~~~~~~..####",
      "####....~~##..###.........",
      "####....~~##..###.........",
      "........~~...........@@...",
      "........~~...........@@...",
      "~~~~~~..~~..@@..##...@....",
      "~~~~~~..~~..@@..##...@....",
      ".....................@####",
      "......####...........@####",
      "........##########........",
      "........##......####......",
      "######............####....",
      "####.......####.....##....",
      "##.........#..#...........",
      "...........#..#..........."
  ],
  [
      "...........#..#.%%%%......",
      "...........#..#.%%%%......",
      "..#..@..#........#%%#..#%%",
      "..#..@..#........#%%#..#%%",
      "..#..@..#...##...#%%#..#%%",
      "..#..@..#...##...#%%#..#%%",
      "..##....##..@@..##%%..##%%",
      "..##....##..@@..##%%..##%%",
      ".......#@@..##..##@...%%%%",
      ".......#....##....@...%%%%",
      "#####.....%%##%%.....#####",
      "#####.....%%##%%.....#####",
      ".........#%%%%%%#.........",
      ".........#%%%%%%#.........",
      "@@####..##%%%%%%##.#####@@",
      "@@####....%%%%%%...#####@@",
      "@@@@@@......%%......@@@@@@",
      "........##..%%..##........",
      "..##....##......##........",
      "..##....##......##........",
      "..###.....##..##.....###%%",
      "..###................###%%",
      "....##..............%%%%%%",
      "...........####.....%%%%%%",
      "...........#..#.......%%%%",
      "....##.....#..#.....##%%%%"
  ],
  [
      "..............@@@@........",
      "..........................",
      "....@@@@@@@@........@@....",
      "....@@..............@@....",
      "....@@......%%..@@@@@@....",
      "....@@......%%....@@@@....",
      "..@@......%%@@......@@....",
      "..@@......%%@@......@@....",
      "........%%@@@@......@@@@..",
      "........%%@@@@........@@..",
      "..@@..%%@@@@@@..@@........",
      "..@@..%%@@@@@@..@@........",
      "...@..@@@@......@@@@......",
      "...@..@@@@......@@@@......",
      "@.......@@..@@@@@@.....@..",
      "@.......@@..@@@@@@.....@..",
      "...@@@......@@@@%%....@@..",
      "...@@@......@@@@%%....@@..",
      "..@@........@@%%....@@@@..",
      "..@@........@@%%....@@@@..",
      "..@@@@@@....%%....@@......",
      "......@@....%%....@@......",
      "..................@@....@@",
      "...........####.......@@@@",
      "...........#..#...........",
      "@@@@.......#..#..........."
  ],
  [
      "....##....##......##......",
      "....##....##..##..##......",
      "%%######..##......###.....",
      "%%######..##..@@..###.....",
      "%%%%%%....##..##..##...##.",
      "%%%%%%........##.......##.",
      "%%~~~~~~~~~~~~~~~~~~~~..~~",
      "%%~~~~~~~~~~~~~~~~~~~~..~~",
      "..##......................",
      "..##........####..........",
      "....##.....###########@@@@",
      "....##.....#####..##......",
      "####..##...#####%%##....##",
      "####..##...#####%%##@@@@##",
      "......@@......%%%%%%%%....",
      "......@@..@@..%%%%%%%%....",
      "~~~~..~~~~~~~~~~..~~~~~~~~",
      "~~~~..~~~~~~~~~~..~~~~~~~~",
      "%%%%...#..................",
      "%%%%...#....####..........",
      "%%%%##..#......#......##..",
      "%%%%##..#......#..@@####..",
      "%%..##..#.........##..##..",
      "%%@@##..#..####.......##..",
      "...........#..#.......##..",
      "...........#..#...##......"
  ],
  [
      "......##............%%....",
      "......##..........@@%%....",
      "##............%%.@@@@...##",
      "##..........@@%%.@@@@...##",
      "........%%.@@@@...@@%%....",
      "......@@%%.@@@@.....%%....",
      ".....@@@@...@@%%..........",
      ".....@@@@.....%%..........",
      "......@@%%................",
      "........%%................",
      "......%%..%%..%%..%%......",
      "......%%@@%%..%%@@%%......",
      "@@##...@@@@....@@@@...##@@",
      "@@##...@@@@....@@@@...##@@",
      "......%%@@%%..%%@@%%......",
      "......%%..%%..%%..%%......",
      "..........................",
      "........@@......@@........",
      "##.....@@@@....@@@@.....##",
      "##.....@@@@....@@@@.....##",
      "##....%%@@%%..%%@@%%....##",
      "##....%%..%%..%%..%%....##",
      "..........................",
      "....##.....####.....##....",
      "....####...#..#...####....",
      "....####...#..#...####...."
  ],
  [
      "..........................",
      "..........................",
      "...#####............#####.",
      "...#..##............##..#.",
      ".###....##..%%%%..##.....#",
      ".#......##..%%%%..##.....#",
      "##......##%%%%%%%%##.....#",
      "##......##%%%%%%%%##.....#",
      "##.....###%%@@@@%%###...##",
      "##.....###%%@@@@%%###...##",
      ".#....##~~~~~~~~~~~~######",
      ".#######~~~~~~~~~~~~######",
      "..######@@@@##@@@@#######.",
      "..######@@@@##@@@@#######.",
      "....####@@..##..@@#####...",
      "....####@@..##..@@#####...",
      "....###################...",
      "....###################...",
      "##%%######@@@@########%%##",
      "##%%......@@@@........%%##",
      "##%%%%%%%%%%%%%%%%%%%%%%##",
      "##%%%%%%%%%%%%%%%%%%%%%%##",
      "....%%%%%%......%%%%%%%%..",
      "....%%%%%%.####.%%%%%%%%..",
      "......#....#..#.....#.....",
      "......#....#..#.....#....."
  ],
  [
      "..........@@..##..####....",
      "..........@@..##..####....",
      "...#########..##..........",
      "...#########..##..........",
      "......#...##..####..%%%%%%",
      "......#...##..####..%%%%%%",
      "...#..........@@..%%%%%%%%",
      "...#..........@@..%%%%%%%%",
      "...#..######@@####%%%%##@@",
      "...#..######@@####%%%%..@@",
      "..######@@....##..%%%%...#",
      "........@@....##..%%%%...#",
      ".#######..@@%%%%%%%%%%....",
      ".#######..@@%%%%%%%%%%....",
      "......@@....%%%%%%%%%%##..",
      "......@@....%%%%%%%%%%##..",
      "@@##..%%%%%%%%@@%%%%%%##..",
      "@@##..%%%%%%%%@@%%%%%%##..",
      ".###%%%%%%%%%%........###.",
      ".###%%%%%%%%%%........###.",
      "..##%%%%........@@######..",
      "..##%%%%..........######..",
      "....%%%%..........##...#..",
      "....%%%%...####...##...#..",
      "....%%%%...#..#...........",
      "..##%%%%...#..#..........."
  ],
  [
      "..............######......",
      "..............######......",
      "..######..........##......",
      "..########..##....##......",
      "........##..##........####",
      "........##............####",
      "..~~~~~~~~~~..###.....##@@",
      "..~~~~~~~~~~..###.....##..",
      "..........~~..##..@@@.##..",
      "....@@@@@@~~..##..@@@.##..",
      "##..######~~~~~~..~~####..",
      "##..######~~~~~~..~~####..",
      "........@@~~......~~@@....",
      "........@@~~......~~......",
      "~~~~~~..~~~~####..~~......",
      "~~~~~~..~~~~####..~~......",
      "..........##@@@@..~~~~~~..",
      "..........##......~~~~~~..",
      "######....................",
      "######....................",
      "....##..@@@@......####...#",
      "....##............####...#",
      "##................##....##",
      "##.........####...##....##",
      "...........#..#...........",
      "...........#..#..........."
  ],
  [
      "..........................",
      "........##......##........",
      "..########......########..",
      "..########......########..",
      "..##........##........@@..",
      "..##........##........@@..",
      "..##..####......####..####",
      "..##..##..........##..####",
      "..##..#.%%..@@..%%.#..@@##",
      "..##..#.%%@@@@@@%%.#..@@##",
      "..##....%%%%%%%%%%....@@##",
      "........%%%%%%%%%%......##",
      "##......%%%%%%%%%%......##",
      "##@@....%%%%%%%%%%....####",
      "##@@..#.%%@@@@@@%%.#..##..",
      "##@@..#.%%..@@..%%.#..##..",
      "####..##..........##..@@..",
      "####..####......####..@@..",
      "##@@........##........##..",
      "##@@........##........##..",
      "##########......######@@@@",
      "##########......######@@@@",
      "####....##......##....##..",
      "####.......####.......##..",
      "####.......#..#...........",
      "####.......#..#..........."
  ],
  [
      "..........................",
      "..........................",
      "%%%%......######......%%%%",
      "%%%%....##########....%%%%",
      "%%.....############.....%%",
      "%%.....############.....%%",
      "......####%%##%%####......",
      "......####%%##%%####......",
      "......##%%%%##%%%%##......",
      "......##%%%%##%%%%##......",
      "%%....##############....%%",
      "%%....##############....%%",
      "%%%%....##%%##%%##....%%%%",
      "%%%%....##%%##%%##....%%%%",
      "~~~~~~..##########..~~~~~~",
      "~~~~~~..##########..~~~~~~",
      ".........#.#.#.#.#........",
      ".........#.#.#.#.#........",
      "........#.#.#.#.#.........",
      "........#.#.#.#.#.........",
      ".@.@.@..............@.@.@.",
      ".@.@.@..............@.@.@.",
      "#.#.#................#.#.#",
      "#.#.#......####......#.#.#",
      "@.@.@..@...#..#...@..@.@.@",
      "@.@.@..@...#..#...@..@.@.@"
  ],
  [
      "........####....##........",
      "........####....##........",
      "..%%%%####......##........",
      "..%%%%####......##........",
      "%%%%%%%%%%%%%%%%####......",
      "%%%%%%%%%%%%%%%%####......",
      "%%@@##%%######%%%%%%%%##@@",
      "%%..##%%######%%%%%%%%##@@",
      "%%%%##%%%%%%@@%%%%##@.##..",
      "%%%%##%%%%%%..%%%%##@.##..",
      "..%%%%##..%%%%%%%%##..##..",
      "..%%%%##@@%%%%%%%%##..##..",
      "..##########%%%%#####.%%%%",
      "..##########%%%%#####.%%%%",
      ".@@@####......####......%%",
      ".@..####......##........%%",
      "..##..##......##%%%%###.%%",
      "..##..##....##..%%%%###.%%",
      "..##......@@##%%%%##....%%",
      "..##.....###..%%%%##....%%",
      "..#####..###%%%%..%%##%%%%",
      "..#####..###%%%%##%%##%%%%",
      "....##...#......##%%##%%..",
      "....##..%%.####.##%%..%%..",
      "....##..%%.#..#...%%%%%%..",
      "...........#..#...%%%%%%.."
  ],
  [
      "..........................",
      "..........................",
      "....@@%%@@................",
      "....@@%%@@................",
      "......%%..%%..............",
      "......%%..%%@@............",
      "..%%........%%............",
      "..%%........%%##..........",
      "..%%%%....%%..%%..........",
      "..%%%%....%%..%%@@........",
      "..%%..%%..%%....%%........",
      "..%%..%%..%%....%%##......",
      "..%%....%%......%%%%......",
      "..%%....%%......%%%%@@....",
      "....%%........%%%%%%%%....",
      "....%%........%%%%%%%%##..",
      "......%%....%%..%%%%%%%%..",
      "......%%....%%..%%%%%%%%..",
      "##..........%%....%%%%%%@@",
      "##..........%%....%%%%%%@@",
      "####..........%%..%%%%%%%%",
      "####..........%%..%%%%%%%%",
      "@@####..........%%..%%%%%%",
      "@@####.....####.%%..%%%%%%",
      "@@@@####...#..#.%%....%%%%",
      "@@@@####...#..#.%%....%%%%"
  ],
  [
      "..........................",
      ".......##...........##....",
      "..##..###.....------####..",
      "..##..###.....------####..",
      "..##....##..@@----------..",
      "..##....##..@@----------..",
      "------@.##....##--------..",
      "------@.##....##--------..",
      "------------####.##.......",
      "------------####.##.......",
      ".....@--------##.##...@@@@",
      ".....@--------##.##.......",
      "########--------------####",
      "########--------------####",
      "......####-------@........",
      "......####-------@........",
      "..######..------####..##..",
      "..######..------####..##..",
      "------##--........##..##..",
      "------##--........##..##..",
      "----------@@..@@......##..",
      "----------..........####..",
      "##--------........##......",
      "##--------.####...##......",
      "####@......#..#...##..##..",
      "####@......#..#...##..##.."
  ],
  [
      "................@@@@@@%%..",
      "................@@@@@@%%..",
      "..##............@@....@@..",
      "..##............@@....@@..",
      "##%%##......########..@@..",
      "##%%##......########..@@..",
      "..##%%##....##..%%##@@@@..",
      "..##%%##....##..%%##@@@@..",
      "....##..%%@@##%%..##......",
      "....##..%%@@##%%..##......",
      "........@@..##@@####......",
      "........@@..##@@####......",
      "....####@@##..@@..........",
      "....####@@##..@@..........",
      "....##..%%##@@%%..........",
      "....##..%%##@@%%..........",
      "@@@@@@%%..##....####......",
      "@@@@@@%%..##....####......",
      "@@..########....##@@@@....",
      "@@..########....##@@@@....",
      "@@....@@..........@@####..",
      "@@....@@..........@@####..",
      "%%@@@@@@............##@@@@",
      "%%@@@@@@...####.....##@@@@",
      "...........#..#.......@@@@",
      "...........#..#.......@@@@"
  ],
  [
      "..##..##..##..##..##..##..",
      "..##..##..##..##..##..##..",
      "..##..##..##..##..##..##..",
      "..##..##..##..##..##..##..",
      "..@@..@@..@@..@@..@@..@@..",
      "..........................",
      "........##......##........",
      "##..##..##......##..##..##",
      "##..######..##..######..##",
      "##..##..##..##..##..##..##",
      "@@..@@..@@..@@..@@..@@..@@",
      "........@@......@@........",
      "%%%%....##..%%..##....%%%%",
      "%%%%....##..%%..##....%%%%",
      "%%%%%%%%####%%####%%%%%%%%",
      "%%%%%%%%##..%%..##%%%%%%%%",
      "%%%%%%%%%%%%%%%%%%%%%%%%%%",
      "%%%%%%%%%%%%%%%%%%%%%%%%%%",
      "........##%%%%%%##........",
      "##..##..##%%%%%%##..##..##",
      "..##..##....%%....##..##..",
      "..##..##....%%....##..##..",
      "..##..##..........##..##..",
      "..##..##...####...##..##..",
      "..##..##...#..#...##..##..",
      "...........#..#..........."
  ],
  [
      "......~~..##....##..##....",
      "......~~..##....##..##....",
      "................##..@@....",
      "................##..@@....",
      "......~~....@@..##..##....",
      "......~~..##@@..##..##....",
      "@@..##~~..@@....##..##....",
      "....##~~..@@..##....##....",
      "....##~~......##..........",
      "....##~~......##..........",
      "##..##~~~~..~~~~~~~~....##",
      "##..##~~~~..~~~~~~~~....##",
      "..............%%..~~..@@@@",
      "......##......%%..~~......",
      "####.###..@@%%%%%%~~......",
      "####.###..@@%%%%%%~~..####",
      "##...#....##%%%%%%~~..##..",
      ".....#....##%%%%%%~~..##..",
      "..........##..%%..~~..%%..",
      "..@@......##..%%..~~..%%..",
      "..##......######....%%%%%%",
      "..##..@@............%%%%%%",
      "..##..##..........~~%%%%%%",
      "..##..##...####...~~%%%%%%",
      "...........#..#...~~..%%..",
      "...........#..#...~~..%%.."
  ],
  [
      "..........................",
      "......######....##........",
      "....################......",
      "..##################......",
      "..%%%%%%%%%%%%%%%%####....",
      "..%%%%%%%%%%%%%%%%####....",
      "%%%%............%%%%####..",
      "%%%%............%%%%####..",
      "%%..@@....@@......%%%%%%..",
      "%%..@@....@@......%%%%%%..",
      "%%..@@....@@......%%%%%%..",
      "%%..@@....@@......%%%%%%..",
      "%%....%%........%%%%#####.",
      "%%....%%........%%%%#####.",
      "%%%%%%%%%%%%%%%%%%#######.",
      "%%%%%%%%%%%%%%%%%%#######.",
      "##%%%%####%%%%%%########..",
      "##%%%%####%%%%%%########..",
      "..####################..@@",
      "..####################..@@",
      "@@..##@@#############...@@",
      "@@..##@@#############...@@",
      "..@@####@@......####@@@@@@",
      "..@@##..@@.####.####@@@@@@",
      "...........#..#...........",
      "...........#..#..........."
  ],
  [
      "..........%%..............",
      "..........%%..............",
      "........%%@@%%............",
      "........%%@@%%............",
      "....%%....%%....%%%%......",
      "....%%....%%....%%%%......",
      "..%%##%%......%%####%%....",
      "..%%##%%......%%####%%....",
      "....%%##%%......%%%%....%%",
      "....%%##%%......%%%%....%%",
      "%%....%%....%%........%%@@",
      "%%....%%....%%........%%@@",
      "##%%......%%@@%%....%%..%%",
      "##%%......%%@@%%....%%..%%",
      "@@##%%......%%....%%@@%%..",
      "@@##%%......%%....%%@@%%..",
      "##%%....%%......%%..%%....",
      "##%%....%%......%%..%%....",
      "%%....%%##%%..%%##%%......",
      "%%....%%##%%..%%##%%......",
      "......%%##%%....%%....%%..",
      "......%%##%%....%%....%%..",
      "..%%....%%..........%%@@%%",
      "..%%....%%.####.....%%@@%%",
      "%%@@%%.....#..#...%%##%%..",
      "%%@@%%.....#..#...%%##%%.."
  ],
  [
      "..........................",
      "..........................",
      "..........@@@@............",
      "..........@@@@............",
      "............@@............",
      "............@@............",
      "..@@@@%%%%##@@##%%%%@@@@..",
      "..@@@@%%%%##@@##%%%%@@@@..",
      "......@@%%%%@@%%%%@@......",
      "......@@%%%%@@%%%%@@......",
      "%%......@@%%%%%%@@......%%",
      "%%......@@%%%%%%@@......%%",
      "@@%%......%%%%%%......%%@@",
      "@@%%......%%%%%%......%%@@",
      "%%........@@%%@@........%%",
      "%%......@@..%%..@@......%%",
      "........@@......@@........",
      "........@@..@@..@@........",
      "......@@....@@....@@......",
      "......@@....@@....@@......",
      "..........................",
      "..........................",
      "..........................",
      "...........####...........",
      "....@@.....#..#.....@@....",
      "....@@.....#..#.....@@...."
  ],
  [
      "....@@..##@@.........#....",
      "....@@..##...........#....",
      "....##..##%%..########....",
      "....##..##%%....######....",
      "..%%%%..##%%.##.......@@@@",
      "..%%%%..##%%.##.......@@@@",
      "%%%%%%%%%%%%######...###..",
      "%%%%%%%%%%%%######...###..",
      "....%%%%....@@##...#####.#",
      "....%%%%####..##...###...#",
      "##@@....####......####...#",
      "##....##..........##.....#",
      ".#....##------------------",
      ".#..####------------------",
      ".#..##..------------------",
      ".#......------------------",
      "....@@..------------------",
      "....@@..------------------",
      "##..##..------------------",
      "##..##..------------------",
      ".#..##..------------------",
      ".#..##..------------------",
      ".#..##..........----------",
      ".#..##.....####.----------",
      "....##.....#..#...--------",
      "...........#..#...--------"
  ],
  [
      "......@@..##..##..##..@@..",
      "......@@..##..##..##..@@..",
      "..##..##..........@@......",
      "..##..##..........@@......",
      "..##..##....@@....@@..@@@@",
      "..##..##....@@....@@..@@@@",
      "..##......##..@@##......@@",
      "..##......##..@@##......@@",
      "........####..####..@@....",
      "........####..####..@@....",
      "....@@..##....####..####..",
      "....@@..##....####..####..",
      "@@..@@....##..@@....@@##..",
      "@@..@@....##..@@....@@##..",
      "....####..##......##@@....",
      "....####..##......##@@....",
      "..@@####..####..####....##",
      "..@@####..####..####....##",
      "..##......##@@........####",
      "..##......##@@........####",
      "......##..####@@..@@....##",
      "......##..####@@..@@....##",
      "##..####..........##@@....",
      "##..####...####...##@@....",
      "##..##.....#..#...######..",
      "##..##.....#..#...######.."
  ],
  [
      "....~~~~..................",
      "....~~~~..................",
      "......~~%%..#.............",
      "@@....~~%%..#.............",
      "%%..........@...#...~~~~..",
      "%%@@........@...#...~~~~..",
      "%%%%..@@...#....@.%%~~....",
      "%%%%....##.#....@.%%~~....",
      "%%%%%%....@@...#..........",
      "%%%%%%....@@##.#........@@",
      "%%%%@@.....#..@@........%%",
      "%%%%..@@...#..@@##....@@%%",
      "%%@@....##@@...#..@@..%%%%",
      "%%........@@...#......%%%%",
      "..........#.##@@....%%%%%%",
      "..........#...@@....%%%%%%",
      "....~~%%.@....#.##..@@%%%%",
      "....~~%%.@....#...@@..%%%%",
      "..~~~~...#...@..........%%",
      "..~~~~...#...@..........%%",
      ".............#..%%~~....@@",
      ".............#..%%~~......",
      "@@................~~~~....",
      "@@.........####...~~~~....",
      "@@@@.......#..#.........@@",
      "@@@@.......#..#.........@@"
  ],
  [
      "........@@................",
      "........@@................",
      "@@@@....@@....@@@@........",
      "@@@@....@@....@@@@........",
      "..@@....@@......@@..@@@@%%",
      "..@@....@@......@@..@@@@%%",
      "..@@....@@@@@@..%%..@@....",
      "..@@....@@@@@@..%%..@@....",
      "..##........@@..@@@@@@....",
      "..##........@@..@@@@@@....",
      "%%@@@@..@@##@@####........",
      "%%@@@@..@@##@@####........",
      "....@@%%@@%%....##....@@@@",
      "....@@%%@@%%....##....@@@@",
      "....@@....%%....@@....@@..",
      "....@@....%%....@@....@@..",
      "....##....@@....@@@@##@@..",
      "....##....@@....@@@@##@@..",
      "%%@@@@@@%%%%##@@@@..##@@..",
      "%%@@@@@@%%%%##@@@@..##@@..",
      "......##........%%%%..##..",
      "......##........%%%%..##..",
      "......@@..........%%..##..",
      "......@@...####...%%..##..",
      "......@@...#..#...@@..##..",
      "......@@...#..#...@@..##.."
  ],
  [
      ".....................@@...",
      ".....................@@...",
      "....................@@....",
      "............@@......@@....",
      "............%%....###.....",
      "..........##%%##..###.....",
      "..........%%%%%%..###.....",
      "........@@%%%%%%@@###.....",
      "........%%%%--%%%%###.....",
      "......##%%%%--%%%%###.....",
      "......%%%%------%%%%#.....",
      "....@@%%%%------%%%%#.....",
      "....%%%%----------%%%%....",
      "..##%%%%----------%%%%##..",
      "..%%%%--------------%%%%..",
      "@@%%%%--------------%%%%@@",
      "%%%%------------------%%%%",
      "%%%%------------------%%%%",
      "..%%------------------%%..",
      "..%%------------------%%..",
      "..%%------------------%%..",
      "..%%------------------%%..",
      "..%%------......------%%..",
      "..%%------.####.------%%..",
      "..%%----...#..#...----%%..",
      "..%%----...#..#...----%%.."
  ],
  [
      "....................##....",
      "....................##....",
      "..##~~~~..@@..##..........",
      "..##~~~~..@@..##..........",
      "....~~~~##%%%%%%~~~~..@@..",
      "....~~~~##%%%%%%~~~~..@@..",
      "..........%%%%%%~~~~##....",
      "..........%%%%%%~~~~##....",
      "..@@....~~~~..%%..........",
      "..@@....~~~~..%%..........",
      "%%%%##..~~~~@@........##..",
      "%%%%##..~~~~@@........##..",
      "%%%%%%............@@....@@",
      "%%%%%%............@@....@@",
      "..##~~~~..##..............",
      "..##~~~~..##..............",
      "@@..~~~~%%%%~~~~%%%%..##..",
      "@@..~~~~%%%%~~~~%%%%..##..",
      "........%%..~~~~%%%%~~~~..",
      "........%%..~~~~%%%%~~~~..",
      "......@@%%......%%%%~~~~..",
      "......@@%%......%%%%~~~~..",
      "....##..##................",
      "....##..##.####...........",
      "##.........#..#...##@@....",
      "##.........#..#...##@@...."
  ],
  [
      "..........................",
      "..........................",
      "..........................",
      "..........####......@@....",
      "..........%%%%......%%....",
      "..@@@@..##%%%%@@..##%%##..",
      "..%%%%..%%%%%%%%..%%%%%%..",
      "##%%%%##%%%%%%%%##%%%%%%##",
      "%%%%%%%%%%%%%%%%%%%%%%%%%%",
      "%%%%%%%%%%%%%%%%%%%%%%%%%%",
      "@@%%~~%%%%%%%%%%~~%%%%%%%%",
      "@@%%~~%%%%%%%%%%~~%%%%%%%%",
      "%%%%~~~~~~%%%%%%~~~~~~%%@@",
      "%%%%~~~~~~%%%%%%~~~~~~%%@@",
      "%%%%%%%%~~%%@@%%%%%%~~%%%%",
      "%%%%%%%%~~%%@@%%%%%%~~%%%%",
      "%%%%%%%%%%%%%%%%%%%%%%%%%%",
      "%%%%%%%%%%%%%%%%%%%%%%%%%%",
      "%%%%%%%%%%####%%%%%%%%%%@@",
      "%%%%%%%%%%....%%%%%%%%%%..",
      "@@%%%%%%##....##%%%%%%@@..",
      "..%%%%%%........%%%%%%....",
      "..@@####........######....",
      "...........####...........",
      "...........#..#...........",
      "...........#..#..........."
  ],
  [
      "......~~........~~........",
      "......~~........~~........",
      "~~~~..~~..~~~~~~~~..~~~~~~",
      "~~~~..~~..~~~~~~~~..~~~~~~",
      "%%%%##....##....~~..~~%%~~",
      "%%%%##....##....~~..~~%%~~",
      "%%~~~~~~~~..@@....##%%%%%%",
      "%%~~~~~~~~..@@....##%%%%%%",
      "%%%%..~~....~~..~~~~~~~~%%",
      "%%%%..~~....~~..~~~~~~~~%%",
      "~~~~..~~..~~~~....~~......",
      "~~~~..~~..~~~~....~~......",
      "....##%%##..##%%..~~....~~",
      "....##%%##..##%%..~~....~~",
      "..~~~~%%~~~~~~~~..%%##..~~",
      "..~~~~%%~~~~~~~~..%%##..~~",
      "##....##....~~..%%%%~~..~~",
      "##....##....~~..%%%%~~..~~",
      "~~~~..~~~~..~~##~~~~~~....",
      "~~~~..~~~~..~~##~~~~~~....",
      "....##..%%%%....%%~~....~~",
      "....##..%%%%....%%~~....~~",
      "..~~~~~~%%........~~..~~~~",
      "..~~~~~~%%.####...~~..~~~~",
      "..~~.......#..#...........",
      "..~~.......#..#..........."
  ],
  [
      "------------..------------",
      "------------..------------",
      "--------------------------",
      "--------------------------",
      "------##----------##------",
      "------##----------##------",
      "--##..##..##--##..##..##--",
      "--##..##..##--##..##..##--",
      "--######..........######--",
      "--....##..........##------",
      "------##..##@@##..##------",
      "------######@@######------",
      "@@------..@@..@@..------@@",
      "@@------..........------@@",
      "--------..........--------",
      "--------..##..##..--------",
      "--------..##..##..--------",
      "--------..##..##..--------",
      "------##..........##------",
      "------##....##....##------",
      "--##--##..@@@@@@..##--##--",
      "--##--##..........##--##--",
      "..##..##..........##..##..",
      "..######...####...######..",
      "..##.......#..#.......##..",
      "...........#..#..........."
  ],
  [
      "........@@........@@......",
      "........@@........@@......",
      "..@@......@@....@@%%%%....",
      "..@@......@@....@@%%%%....",
      "....@@........@@%%..@.....",
      "....@@........@@%%@@@.....",
      "......@@..%%%%%%%%%%...@..",
      "......@@..%%%%%%%%%%...@..",
      "..@.....@@%%%%@@%%....@@..",
      "..@.....@@%%%%@@%%....@@..",
      "..@@@.%%..@@%%%%@@.....@..",
      "....@.%%..@@%%%%@@.....@..",
      "....%%%%%%%%%%....@@......",
      "....%%%%%%%%%%....@@......",
      "....@.%%..@@%%......@@....",
      "..@@@.%%..@@%%......@@....",
      "..%%%%%%@@..@@........@@..",
      "..%%%%%%@@..@@..@@....@@..",
      "%%%%%%@@.........@........",
      "%%%%%%@@.........@........",
      "....@@.................@@@",
      "....@@.................@@@",
      "....................@.....",
      "...........####...@@@.....",
      "@..........#..#...........",
      "@...@@.....#..#..........."
  ],
  [
      "........#..#..............",
      "........#..#..............",
      "#.#.#..#..#.....#.#.......",
      "#.#.#..#..#.....#.#.......",
      "#.#.#.####......#.###.....",
      "#.#.#.####......#.###.....",
      ".#.#..###......##.####....",
      ".#.#..###......##.####....",
      "..#...##.##...#.######....",
      "..#...##.##...#.######....",
      "..#..#....###.##.#.###....",
      "..#..#....###.##.#.###....",
      "..#......######...#.##....",
      "..#......######...#.##....",
      "...#....#.#####...#.##....",
      "...#....#.#####...#.##....",
      "...#####..######..#.#.####",
      "...#......######..#.#...##",
      "...#.....##.##.##.#.#..#.#",
      "...#.....##.##.##...#..#.#",
      "....#...##.##.####.....#..",
      "....#...##.##.####.....#..",
      "....#..##.......###...#...",
      "....#..##..####.###...#...",
      "....#..#...#..#...####....",
      "....#..#...#..#...####...."
  ],
  [
      "..........................",
      "..........................",
      "........##..##............",
      "........##..##............",
      "%%....%%##%%##%%....%%....",
      "%%....%%##%%##%%....%%....",
      "##%%%%##########%%%%##%%..",
      "##%%%%##########%%%%##%%..",
      "########@@##@@########%%..",
      "########@@##@@########%%..",
      "~~~~~~##########~~~~~~%%..",
      "~~~~~~##########~~~~~~%%..",
      "~~##################~~~~%%",
      "~~##################~~~~%%",
      "######~~######~~######%%%%",
      "######~~######~~######%%%%",
      "####~~~~~~##~~~~~~####~~~~",
      "####~~~~~~##~~~~~~####~~~~",
      "%%~~~~%%%%%%%%%%~~~~%%~~%%",
      "%%~~~~%%%%%%%%%%~~~~%%~~%%",
      "..%%%%..........%%%%..%%..",
      "..%%%%..........%%%%..%%..",
      "..........................",
      "...........####...........",
      "...........#..#...........",
      "...........#..#..........."
  ]
];


function parseLevel(lines) {
  if (lines.length !== GRID_SIZE) {
    throw new Error(`Invalid level height: ${lines.length}`);
  }
  return lines.map((line, row) => {
    if (line.length !== GRID_SIZE) {
      throw new Error(`Invalid row length in level: ${line.length}`);
    }
    return Array.from(line).map((char, col) => {
      const tile = CHAR_TO_TILE[char];
      if (tile == null) {
        throw new Error(`Unknown tile character "${char}" at (${row}, ${col})`);
      }
      return tile;
    });
  });
}

function applyBase(level) {
  const center = Math.floor(GRID_SIZE / 2);
  const baseRow = GRID_SIZE - 2;
  const eagleRow = GRID_SIZE - 1;
  level[baseRow][center] = TILE_TYPES.BASE;
  level[eagleRow][center] = TILE_TYPES.EAGLE;
}

export const LEVELS = RAW_LEVELS.map((lines) => {
  const level = parseLevel(lines);
  applyBase(level);
  return level;
});
